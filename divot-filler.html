<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Divot Filling Machine</title>
    <meta
      name="description"
      content="Automated golf course divot filling machine."
    />
    <link rel="stylesheet" href="../styles.css" />
  </head>

  <body>
    <header class="site-header">
      <div class="container">
        <div class="brandline">
          <div>
            <div class="site-title">Ben Boland</div>
            <div class="site-subtitle">Embedded / backend / systems</div>
          </div>
          <nav class="site-nav">
            <a href="../index.html">Home</a>
            <a href="../index.html#projects">Projects</a>
            <a href="../resume.pdf">Resume</a>
            <a href="https://github.com/Shfloop">GitHub</a>
            <a href="mailto:benbolan01@gmail.com">Contact</a>
          </nav>
        </div>
      </div>
    </header>

    <main class="container">
      <!-- Hero -->
      <section class="box">
        <div class="box-title">
          <span>Automated Golf Course Divot Filling Machine</span>
          <span class="meta">
            Apr 2025 – Sep 2025 • Prototype w/ continued plans</span
          >
        </div>

        <div class="box-body">
          <p class="lead">
            This machine is intended to be used by golf course maintenance crews
            to speed up and reduce man power needed to fill divots. The
            intention is for this to be pulled behind a ground maintenance
            vehicle and automatically fill in divots with sand / divot mix.
          </p>
          <p class="meta">
            As of writing this I don't have any videos of it running on real
            grass as i changed cameras from when it ran on a raspberry pi. I
            need to retrain a model in the spring with the new camera.
          </p>

          <div class="media">
            <div class="caption">Overview of the machine</div>
            <img
              src="img/divot_filler_above.png"
              style="width: 55vw; min-width: 330px"
              alt="[Alt text describing the image]"
            />
            <div class="caption">
              machine running with 2D Visualizer and viewing on laptop over VNC
            </div>
            <img
              src="img/divot_filler_running.png"
              style="width: 55vw; min-width: 330px"
              alt="[Alt text describing the image]"
            />
          </div>

          <div class="two-col">
            <!-- Quick Facts -->
            <div class="panel">
              <div class="panel-title">Quick Facts</div>
              <div class="panel-body">
                <ul class="kv">
                  <li>
                    <span class="k">Goal:</span
                    ><span class="v">
                      Create a machine capable of automating divot
                      filling.</span
                    >
                  </li>
                  <li>
                    <span class="k">Constraints:</span
                    ><span class="v">
                      Low latency, power efficiency, reliablibily,</span
                    >
                  </li>
                  <li>
                    <span class="k">Stack:</span
                    ><span class="v">
                      Rust, STM32, RK3588, YOLOv11n seg model</span
                    >
                  </li>
                </ul>

                <div class="tags">
                  <span class="pill">Rust</span>
                  <span class="pill">Computer Vision</span>
                  <span class="pill">Embedded Programming</span>
                  <span class="pill">Robotics</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Overview -->
      <section class="box">
        <div class="box-title">Overview</div>
        <div class="box-body">
          <p>
            The machine is a 3ft by 3ft mini trailer intended to be hauled
            around by golf course grounds crew carts. It runs on an Orange pi 5
            ultra making use of the RK3588 SoC to run inference on the
            integrated NPU. The divot filling mechanism is split up into slices
            where each slice is responsible for filling a roughly 5 in area. The
            motors and servos are controlled via an STM32F407 microcontroller
            running embedded rust.
          </p>
          <p>
            Currently the overal proejct is still a prototype but I would
            consider the core of the software to be complete. The model still
            needs more data and training but the inference and processing
            latency are all good enough for a finished product.
          </p>
          <ul>
            <li>[Outcome / capability #1]</li>
            <li>[Outcome / capability #2]</li>
            <li>[Outcome / capability #3]</li>
          </ul>
        </div>
      </section>

      <!-- System / Architecture -->
      <section class="box">
        <div class="box-title">System Architecture</div>
        <div class="box-body">
          <p>
            The machine is powered by an Orange Pi 5 ultra mainly because i make
            heavy use of the onboard NPU of the RK3588 SoC. The Rust based
            software has seperate threads for inference, data processing,
            communication with microcontroller, and visualization / monitoring.
          </p>
          <p>
            The model was originally created by a custom rig and a raspberry pi
            5 and pi cam. I then did manual data annotation and created a masked
            dataset of around 500 images. Training was done via my home computer
            using YOLOv11n-seg. This would have been good enough had i stayed on
            the raspberry pi but the segmentation model was too expensive to run
            on the CPU alone. This is how i ended up using the RK3588 and doing
            a whole lot of extra work to make something that ran correctly.
          </p>
          <p>
            Luckily the RKNPU already had examples and a way to convert a YOLO
            model to one that can run on the NPUbut it took a few days to
            understand the problems and find the solution. It took a few more
            days to get everything running because I didn't realize just how much
            The yolo runtime was running inference. There already were
            example code in C++ but I had to take a deep dive into how models
            are processed to get it to run correctly.

          </p>
          <p>
            All of the electronics are then controlled by a STM32F407, which
            communicates to the Orange Pi 5 over SPI. The model is a custom YOLO
            v11 semantic segmentation model then converted to run in RKNN
            runtime. The sand dispensing is still work in progress but currently
            its a auger style feed into a chute which can redirect the sand left
            / right.

          </p>

          <!-- Optional diagram -->

          <h3 class="h3">Components</h3>
          <ul>
            <li>
              <strong>Inference Pipeline</strong> — Find fillable divots & send
              formatted data to data processing.
            </li>
            <li>
              <strong>Data Processing</strong> — Maintain a list of active
              divots, split them into fillable sections, & and send commands to
              communication.
            </li>
            <li>
              <strong>Communication</strong> — Communicate with microcontroller
              over spi, command movement of actuators & calculate machine.
              odomytry.
            </li>
            <li>
              <strong>Visualization / monitoring</strong> — Maintain an updated
              state of the machine through a 2d visualization window.
            </li>

            <li>
              <strong>Microcontroller - STM32F407</strong> — Control actuators
              from commands, ensure devices are functioning properly.
            </li>
            <li>
              <strong>Robotics / hardware</strong> — Dispense sand accurately
              into desired positions.
            </li>
          </ul>
        </div>
      </section>

      <!-- Engineering Challenges -->
      <section class="box">
        <div class="box-title">Engineering Challenges</div>
        <div class="box-body">
          <div class="callout">
            <div class="callout-title">
              Challenge #1 — Figuring out how to bring my idea to life
            </div>
            <div class="callout-body">
              <p>
                <strong>Problem:</strong> I don't have a large background with
                this kind of stuff so most things were learned as I tried things
                out.
              </p>
              <p>
                <strong>Approach:</strong> Sticking with the project was a large
                part of solving it, The machine went through 2 different
                versions before I was able to make something that I think could
                work.
              </p>
              <p>
                <strong>Result:</strong> I went from a simple Python script and
                a wooden frame to a multithreaded custom software and a 3ft x3ft
                metal frame which i think could go somewhere.
              </p>
            </div>
          </div>

          
      </section>

     

          
        </div>
      </section>

      <!-- Lessons / Next Steps -->
      <section class="box">
        <div class="box-title">Lessons & Next Steps</div>
        <div class="box-body">
          <h3 class="h3">What went well</h3>
          <ul>
            <li>I managed to create a working prototype.</li>
            <li>I'm very happy with the software design of the machine.</li>
          </ul>

          <h3 class="h3">What I’d improve</h3>
          <ul>
            <li>
              The inference pipeline is fast enough but it could be optimized
              more if there is no longer a bottleneck with sand dispensing.
            </li>
            <li>The sand dispensing mechanism needs to be greatly improved.</li>
          </ul>

          <h3 class="h3">Next steps</h3>
          <ul>
            <li>In the spring, get a new dataset with the new camera.</li>
            <li>Run more tests of the machine on a golf course.</li>
            <li>Finalize physical / hardware design.</li>
          </ul>
        </div>
      </section>

      <!-- Footer nav -->
      <section class="footer-nav">
        <a href="../index.html#projects">← Back to projects</a>
        <span class="subtle">/</span>
        <a href="/16BitCPU.html">Next project →</a>
      </section>

      <footer class="footer">
        <div class="subtle">© <span id="year"></span> Ben Boland</div>
      </footer>
    </main>

    
  </body>
</html>
